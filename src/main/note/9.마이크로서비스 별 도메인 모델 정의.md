9.마이크로서비스 별 도메인 모델 정의
=========================
## ⭕ 도메인 모델링을 위한 준비
### ◉ 헥사고날 아키텍처 도출
- 내부 영역: 순수한 비즈니스 로직과 규칙들 외부 기술에 의존하지 않음 (회원, 로그인, 포인트 도메인 엔티티와 비즈니스 규칙)
- 외부 영역: 사용자 요청을 받거나 외부 시스템과 연동하는 어댑터들 (회원 가입/수정 API, 로그인/로그아웃 처리, 포인트 부여/사용 엔드포인트)
<img src="../resources/images/헥사고날 아키텍처 도출.png" alt="헥사고날 아키텍처 도출" style="width: 100%; height: auto;" />

### ◉ 도메인 모델링
#### ✦ 회원 도메인 모델
<img src="../resources/images/회원 도메인 모델.png" alt="회원 도메인 모델" style="width: 100%; height: auto;" />

#### ✦ 대여 도메인 모델
<img src="../resources/images/대여 도메인 모델.png" alt="대여 도메인 모델" style="width: 100%; height: auto;" />

#### ✦ 도서 도메인 모델
<img src="../resources/images/도서 도메인 모델.png" alt="도서 도메인 모델" style="width: 100%; height: auto;" />

#### ✦ 전체 도메인 모델
<img src="../resources/images/도메인 모델.png" alt="도메인 모델" style="width: 100%; height: auto;" />

#### ❓VO는 이벤트 스토밍 단계에서 나오지 않는건가?
- 이벤트 스토밍: 큰 그림을 그리는 단계
- 도메인 모델링: 세부적인 모델을 설계하는 단계
  - VO는 도메인 모델링 단계에서 세부 설계 시 도출됨 

#### ❓식별자가 VO로 도출되면 좋은 점?
- 장점
  - 실수 방지: 대여ID 자리에 도서ID를 실수로 넣는 경우를 컴파일 단계에서 차단
  - 코드 가독성: 메서드 시그니처만 봐도 어떤 ID가 필요한지 바로 알 수 있음
  - 확장성: 나중에 ID 생성 규칙이 바뀌어도 VO 내부만 수정하면 됨
- 단점
  - 초기 개발 속도 저하: VO 클래스를 추가로 만들어야 하므로 초기 개발 속도가 느려질 수 있음
  - 복잡성 증가: 단순한 ID도 VO로 만들면 코드가 복잡해질 수 있음

## ⭕ 퀴즈
1. 이벤트 스토밍 결과가 도메인 모델링에 어떻게 활용되나요?
- 이벤트 스토밍은 도메인 모델링의 중요한 입력입니다. 이를 통해 바운디드 컨텍스트와 그 안의 핵심 요소인 커맨드, 이벤트, 애그리거트를 식별할 수 있어요. 이는 모델 설계의 기초가 됩니다.
2. 도메인 주도 설계(DDD)에서 값 객체(Value Object)의 주된 역할은 무엇일까요?
- 값 객체는 여러 속성을 묶어 특정 개념을 표현하며 불변성을 가집니다. 객체 생성 시 유효성 검증을 수행하여 잘못된 상태를 방지하는 데 유용해요. 식별자가 없습니다.
3. 도메인 주도 설계(DDD)에서 애그리거트(Aggregate)의 역할은 무엇일까요?
- 애그리거트는 관련된 엔티티와 값 객체들의 묶음으로 일관성 경계를 정의합니다. 애그리거트 루트를 통해 내외부의 조작이 이루어지며 비즈니스 규칙을 지킵니다. 복잡성을 관리하는 핵심 단위예요.
4. 도메인 이벤트(Domain Event)의 주요 목적은 무엇인가요?
- 도메인 이벤트는 도메인에서 발생한 '사실'을 나타내며, 과거 시제를 사용합니다. 주로 다른 바운디드 컨텍스트에 상태 변화를 비동기적으로 알리는 데 사용됩니다. 바운디드 컨텍스트 간 결합도를 낮춥니다.
5. 복잡한 핵심 비즈니스 로직을 가진 바운디드 컨텍스트에 권장되는 아키텍처 스타일은 무엇인가요?
- 바운디드 컨텍스트의 복잡성 및 핵심 여부에 따라 아키텍처를 선택합니다. 복잡한 핵심 도메인은 헥사고날 아키텍처를 고려하고, 단순한 도메인은 다른 패턴이 적합할 수 있어요. 상황에 맞는 설계 접근 방식입니다.
